{
  "name": "MixNF_training_BinRushed",
  "data": {
    "root_dir": "./data/OPTIC/",
    "dataset_name": "OD-OC-Segmentation",
    "image_size": [
      512,
      512,
      3
    ],
    "label_size": [
      512,
      512
    ],
    "pad_size": [
      512,
      512,
      3
    ],
    "crop_size": [
      512,
      512,
      3
    ],
    "source_datasets": [
      "BinRushed"
    ],
    "target_datasets": [
      "Magrabia", "REFUGE", "ORIGA", "Drishti_GS"
    ],
    "data_aug_policy": "Prostate_affine_elastic_intensity",
    "image_format_name": "{pid}/t2_img_clipped.nii.gz",
    "label_format_name": "{pid}/label_clipped.nii.gz",
    "num_classes": 2,
    "use_cache": true,
    "keep_orig_image_label_pair_for_training": true
  },
  "segmentation_model": {
    "network_type": "FCN_16_standard_no_STN",
    "num_classes": 2
  },
  "learning": {
    "apply_nflows_mixing": true,
    "separate_training": true,
    "lr": 0.001,
    "n_epochs": 100,
    "batch_size": 20,
    "use_gpu": true,
    "optimizer_type":"AdamW",
    "load_pretrained_model": false
  },
  "output": {
    "save_epoch_every_num_epochs": 10,
    "save_pics_every_num_epochs": 100,
    "eval_epoch_every_num_epochs": 10
  },
    "nflows_model": {
    "prob": 0.5,
    "decoder_layers_indexes": {
      "2": {
        "latent_size": 32,
        "n_flows": 4,
        "clamp_value": 25.0,
        "normalize_input": false,
        "temperature": 3.5
      },
      "3": {
        "latent_size": 16,
        "n_flows": 4,
        "clamp_value": 25.0,
        "normalize_input": false,
        "temperature": 2.5
      },
      "4": {
        "latent_size": 16,
        "n_flows": 4,
        "clamp_value": 25.0,
        "normalize_input": false,
        "temperature": 1.5
      }
    },
    "mean_weights_format_name": "mean_nflows_model_epoch_{epoch_num}_lyr_{lyr_num}_src_{src_domain}.pth",
    "var_weights_format_name": "var_nflows_model_epoch_{epoch_num}_lyr_{lyr_num}_src_{src_domain}.pth"
  }
}
